<script>
const BASE_URL = "YOUR_RENDER_URL";  // ðŸ”¥ Replace this

function toggleReason() {
    const status = document.getElementById("status").value;
    const reasonBox = document.getElementById("reason");

    if (status === "Not Interested") {
        reasonBox.style.display = "block";
        reasonBox.required = true;
    } else {
        reasonBox.style.display = "none";
        reasonBox.required = false;
    }
}

document.getElementById("ivForm").addEventListener("submit", async function(e){
    e.preventDefault();

    const form = document.getElementById("ivForm");

    const data = {
        name: form.name.value,
        regNo: form.regNo.value,
        place: form.place.value,
        status: form.status.value,
        reason: form.reason.value
    };

    try {
        const res = await fetch(`${BASE_URL}/register`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data)
        });

        const result = await res.json();
        alert(result.message);

        if(res.ok){
            form.reset();
            document.getElementById("reason").style.display = "none";
        }

    } catch (err) {
        alert("Backend not reachable.");
        console.error(err);
    }
});
</script>

